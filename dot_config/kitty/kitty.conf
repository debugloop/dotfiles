# vim:fileencoding=utf-8:foldmethod=marker

include themes/mykanagawa.conf

font_family Fira Code
font_size 11
disable_ligatures cursor

scrollback_lines 4000
scrollback_pager_history_size 50
scrollback_fill_enlarged_window yes

strip_trailing_spaces smart
focus_follows_mouse yes

clear_all_mouse_actions no

enable_audio_bell no

enabled_layouts tall,fat,vertical,horizontal,grid,splits,stack

tab_bar_style powerline
tab_powerline_style slanted
tab_title_template "{fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab}{'*' if layout_name == 'stack' and num_windows > 1 else ''}{index}: {title}"
active_tab_font_style bold

# clear all defaults
clear_all_shortcuts yes

map ctrl+shift+d set_colors --configured ~/.config/kitty/themes/mykanagawa.conf
map ctrl+shift+l set_colors --configured ~/.config/kitty/themes/mylightkanagawa.conf

# os windows
map ctrl+shift+n launch --type=os-window --cwd=current

# tabs
map ctrl+shift+enter new_tab_with_cwd
map ctrl+shift+t new_tab
map ctrl+shift+j previous_tab
map ctrl+shift+k next_tab
map ctrl+shift+. move_tab_forward
map ctrl+shift+, move_tab_backward

# pane creation and navigation
map alt+enter launch --location=vsplit --cwd=current
map shift+alt+enter launch --location=vsplit
map alt+v launch --location=hsplit --cwd=current
map shift+alt+v launch --location=hsplit
map alt+h neighboring_window left
map alt+j neighboring_window down
map alt+k neighboring_window up
map alt+l neighboring_window right
map alt+tab focus_visible_window
map alt+m swap_with_window
map alt+d detach_window ask

# pane resizing
map alt+r resize_window reset
map shift+alt+r start_resizing_window
map alt+up resize_window taller
map alt+down resize_window shorter
map alt+right resize_window wider
map alt+left resize_window narrower
map shift+alt+up resize_window taller 8
map shift+alt+down resize_window shorter 8
map shift+alt+right resize_window wider 5
map shift+alt+left resize_window narrower 5

# select layouts
map alt+backspace next_layout
map alt+space toggle_layout stack
map alt+t goto_layout tall
map shift+alt+t goto_layout tall:bias=70;mirrored=true
map alt+f goto_layout fat
map shift+alt+f goto_layout fat:bias=70
map alt+s goto_layout splits
map alt+g goto_layout grid

# layout actions
map alt+[ layout_action decrease_num_full_size_windows
map alt+] layout_action increase_num_full_size_windows
map alt+backslash layout_action mirror toggle
map alt+p layout_action bias 50 60 70 80

# clipboard
map ctrl+shift+c copy_to_clipboard
map ctrl+shift+v paste_from_clipboard

# scrolling
map ctrl+page_up scroll_page_up
map ctrl+page_down scroll_page_down
map ctrl+shift+page_up scroll_home
map ctrl+shift+page_down scroll_end
map ctrl+shift+[ scroll_to_prompt -1
map ctrl+shift+] scroll_to_prompt +1

# dump output to vim
scrollback_pager bash -c "exec nvim 63<&0 0</dev/null -c 'autocmd TermEnter * stopinsert' -c 'autocmd TermClose * call cursor(max([0,INPUT_LINE_NUMBER-1])+CURSOR_LINE, CURSOR_COLUMN)' -c 'terminal sed </dev/fd/63 -e \"s/'$'\x1b'']8;;file:[^\]*[\]//g\" && sleep 0.01 && printf \"'$'\x1b'']2;\"' -c 'set modifiable'"
map ctrl+shift+h show_scrollback
map ctrl+shift+g show_last_command_output

# directly jump to windows and tabs
map alt+` nth_window -1
map alt+1 nth_window 0
map alt+2 nth_window 1
map alt+3 nth_window 2
map alt+4 nth_window 3
map alt+5 nth_window 4
map alt+6 nth_window 5
map alt+7 nth_window 6
map alt+8 nth_window 7
map alt+9 nth_window 8
map alt+0 nth_window 9
map ctrl+shift+` goto_tab -1
map ctrl+shift+1 goto_tab 1
map ctrl+shift+2 goto_tab 2
map ctrl+shift+3 goto_tab 3
map ctrl+shift+4 goto_tab 4
map ctrl+shift+5 goto_tab 5
map ctrl+shift+6 goto_tab 6
map ctrl+shift+7 goto_tab 7
map ctrl+shift+8 goto_tab 8
map ctrl+shift+9 goto_tab 9
map ctrl+shift+0 goto_tab 10

# font size
map ctrl+shift+equal change_font_size all +2.0
map ctrl+shift+minus change_font_size all -2.0
map ctrl+shift+0 change_font_size all 0

# kitty goodies
map ctrl+shift+e open_url_with_hints
map ctrl+shift+w kitten hints --type word --program -
map ctrl+shift+u kitten unicode_input
map ctrl+shift+escape kitty_shell window
map ctrl+shift+delete clear_terminal reset active
map ctrl+shift+f5 load_config_file
map ctrl+shift+f6 debug_config
map ctrl+shift+m create_marker
map ctrl+shift+, remove_marker
