##################################
# visual
font pango:Fira Mono, FontAwesome, Hack Nerd Font Complete Mono 11

set $background #2e3440
set $foreground #d8dee9
set $black #3b4252
set $red #bf616a
set $green #a3be8c
set $yellow #ebcb8b
set $blue #81a1c1
set $magenta #b48ead
set $cyan #88c0d0
set $white #e5e9f0
set $grey #4c566a

#                       border      bg          text        indicator   child border
client.focused          $foreground $foreground $background $red        $foreground
client.focused_inactive $grey       $grey       $foreground $grey       $grey
client.unfocused        $background $background $foreground $background $background
client.urgent           $red        $red        $background $background $red

smart_borders on
hide_edge_borders both
default_border pixel 1

# hide mouse after 5s on keyboard
seat * hide_cursor 5000
# seat * hide_cursor when-typing enable
# mouse_warping container

##################################
# hardware
input type:keyboard {
    xkb_layout us
    xkb_model pc105
    xkb_variant altgr-intl
    xkb_options compose:rctrl

    # Umlauts using caps? append: ,lv3:caps_switch
    # find options using: localectl list-x11-keymap-options | grep caps
}

input 2:10:TPPS/2_Elan_TrackPoint {
    accel_profile adaptive
    pointer_accel 0.6
    calibration_matrix 8 0 0 0 5 0
}

input type:touchpad {
    events disabled
    tap enabled
    dwt enabled
    middle_emulation enabled
}

output 'Dell Inc. DELL S3221QS 9VRRTB3' mode 3840x2160@60Hz scale 1.3 position 1080 0
output 'Iiyama North America PLX2483H 1127951501478' mode 1920x1080@60Hz position 0 500 transform 270
output 'Unknown 0x573D 0x00000000' mode 1920x1080@60Hz position 4033 0

##################################
# startup execs
exec kanshi
exec mako -c ~/.config/mako/config
exec gammastep -l 48.775846:9.182932
exec alacritty -t 'scratch: ipython' -e fish -c "while true; ipython; end"
exec alacritty -t 'scratch: notes' -e fish -c "cd ~/notes/; while true; nvim *; end"
exec waybar -b main

exec swayidle -w \
    timeout 600 swaylock \
    timeout 610 'swaymsg "output * dpms off"' \
    resume 'swaymsg "output * dpms on"' \
    timeout 10 'if pgrep swaylock; then swaymsg "output * dpms off"; fi' \
    resume 'if pgrep swaylock; then swaymsg "output * dpms on"; fi' \
    before-sleep swaylock

# make gnome-keyrings pinentry work
exec dbus-update-activation-environment --systemd DISPLAY

# make screensharing work
exec dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=sway

# clipboard manager
exec clipman clear --all
exec wl-paste -t text --watch clipman store
bindsym Mod4+Ctrl+v exec clipman pick -t wofi

##################################
# window rules
for_window [shell="xwayland"] title_format "ಠ_ಠ :: %title"

for_window [app_id="firefox"] inhibit_idle fullscreen
for_window [app_id="firefox" title="Firefox — Sharing Indicator"] {
    floating enable
    resize set 30px
    border none
}

for_window [app_id="vlc"] inhibit_idle visible
for_window [instance="spotify"] inhibit_idle visible

for_window [app_id="gcr-prompter"] border pixel 1

for_window [title="^scratch:"] {
    move scratchpad
    sticky enable
}

for_window [title="^float:"] {
    floating enable
}

##################################
# scratchpad and launcher
bindsym Mod4+Shift+minus move scratchpad
bindsym Mod4+minus scratchpad show

bindsym XF86PickupPhone [title="scratch: notes"] scratchpad show
bindsym Scroll_Lock [title="scratch: notes"] scratchpad show

bindsym XF86HangupPhone [title="scratch: ipython"] scratchpad show
bindsym Pause [title="scratch: ipython"] scratchpad show

bindsym Mod4+Scroll_Lock output "Iiyama North America PLX2483H 1127951501478" toggle
bindsym Mod4+Pause output eDP-1 toggle

bindsym Mod4+d exec wofi -G -t alacritty -S run

##################################
# sway control key bindings
bindsym Mod4+Backslash exec swaylock
bindsym Mod4+Shift+c reload
bindsym Mod4+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -b 'Yes, exit sway' 'swaymsg exit'

bindsym Mod4+period exec killall -SIGUSR1 waybar
bindsym Mod4+semicolon exec ~/.config/waybar/toggle_net.sh

mode "escape" {
    bindsym Escape mode "default"
}
bindsym Mod4+Escape mode "escape"

##################################
# container manipulation bindings
floating_modifier Mod4 normal

bindsym --whole-window Mod4+button2 kill
mode "close" {
    bindsym y kill; mode "default"
    bindsym c kill; mode "default"
    bindsym n mode "default"

    bindsym Return kill; mode "default"
    bindsym Escape mode "default"
}
bindsym Mod4+c mode "close"

bindsym Mod4+h focus left
bindsym Mod4+j focus down
bindsym Mod4+k focus up
bindsym Mod4+l focus right
bindsym Mod4+Shift+h move left
bindsym Mod4+Shift+j move down
bindsym Mod4+Shift+k move up
bindsym Mod4+Shift+l move right
bindsym Mod4+comma border toggle

##################################
# container jumping
mode "tag" {
    bindsym 1 mark 1; mode "default"
    bindsym 2 mark 2; mode "default"
    bindsym 3 mark 3; mode "default"
    bindsym 4 mark 4; mode "default"
    bindsym 5 mark 5; mode "default"
    bindsym 6 mark 6; mode "default"
    bindsym 7 mark 7; mode "default"
    bindsym 8 mark 8; mode "default"
    bindsym 9 mark 9; mode "default"
    bindsym 0 mark 0; mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym Mod4+t mode "tag"
mode "goto" {
    bindsym 1 [con_mark="1"] focus; mode "default"
    bindsym 2 [con_mark="2"] focus; mode "default"
    bindsym 3 [con_mark="3"] focus; mode "default"
    bindsym 4 [con_mark="4"] focus; mode "default"
    bindsym 5 [con_mark="5"] focus; mode "default"
    bindsym 6 [con_mark="6"] focus; mode "default"
    bindsym 7 [con_mark="7"] focus; mode "default"
    bindsym 8 [con_mark="8"] focus; mode "default"
    bindsym 9 [con_mark="9"] focus; mode "default"
    bindsym 0 [con_mark="0"] focus; mode "default"

    bindsym apostrophe mode "tag"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym Mod4+apostrophe mode "goto"

##################################
# workspace manipulation
workspace_auto_back_and_forth yes

bindsym Ctrl+Mod4+j workspace prev_on_output
bindsym Ctrl+Mod4+k workspace next_on_output

set $workspace1 "1:web"
set $workspace2 "2:com"
set $workspace3 "3:file"
set $workspace4 "4:music"
set $workspace5 "5:steam"
set $workspace6 "6:misc"
set $workspace7 "7:misc"
set $workspace8 "8:term"
set $workspace9 "9:term"
set $workspace0 "10:term"

set $workspacef1 "11:misc"
set $workspacef2 "12:misc"
set $workspacef3 "13:misc"
set $workspacef4 "14:misc"
set $workspacef5 "15:term"
set $workspacef6 "16:term"
set $workspacef7 "17:term"
set $workspacef8 "18:term"
set $workspacef9 "19:term"
set $workspacef10 "20:term"
set $workspacef11 "21:term"
set $workspacef12 "22:term"

workspace $workspace1 output 'Dell Inc. DELL S3221QS 9VRRTB3'
workspace $workspace2 output 'Dell Inc. DELL S3221QS 9VRRTB3'
workspace $workspace3 output 'Dell Inc. DELL S3221QS 9VRRTB3'
workspace $workspace4 output eDP-1
workspace $workspace5 output eDP-1
workspace $workspace6 output 'Iiyama North America PLX2483H 1127951501478'
workspace $workspace7 output 'Iiyama North America PLX2483H 1127951501478'
workspace $workspace8 output 'Dell Inc. DELL S3221QS 9VRRTB3'
workspace $workspace9 output 'Dell Inc. DELL S3221QS 9VRRTB3'
workspace $workspace0 output 'Dell Inc. DELL S3221QS 9VRRTB3'

bindsym Mod4+1 workspace $workspace1
bindsym Mod4+2 workspace $workspace2
bindsym Mod4+3 workspace $workspace3
bindsym Mod4+4 workspace $workspace4
bindsym Mod4+5 workspace $workspace5
bindsym Mod4+6 workspace $workspace6
bindsym Mod4+7 workspace $workspace7
bindsym Mod4+8 workspace $workspace8
bindsym Mod4+9 workspace $workspace9
bindsym Mod4+0 workspace $workspace0
bindsym Mod4+XF86AudioPlay workspace $workspacef1
bindsym Mod4+F1 workspace $workspacef1
bindsym Mod4+XF86AudioStop workspace $workspacef2
bindsym Mod4+F2 workspace $workspacef2
bindsym Mod4+XF86AudioPrev workspace $workspacef3
bindsym Mod4+F3 workspace $workspacef3
bindsym Mod4+XF86AudioNext workspace $workspacef4
bindsym Mod4+F4 workspace $workspacef4
bindsym Mod4+XF86AudioMute workspace $workspacef5
bindsym Mod4+F5 workspace $workspacef5
bindsym Mod4+XF86AudioLowerVolume workspace $workspacef6
bindsym Mod4+F6 workspace $workspacef6
bindsym Mod4+XF86AudioRaiseVolume workspace $workspacef7
bindsym Mod4+F7 workspace $workspacef7
bindsym Mod4+XF86AudioMicMute workspace $workspacef8
bindsym Mod4+F8 workspace $workspacef8
bindsym Mod4+XF86MonBrightnessDown workspace $workspacef9
bindsym Mod4+F9 workspace $workspacef9
bindsym Mod4+XF86MonBrightnessUp workspace $workspacef10
bindsym Mod4+F10 workspace $workspacef10
bindsym Mod4+F11 workspace $workspacef11
bindsym Mod4+F12 workspace $workspacef12

bindsym Mod4+Shift+1 move container to workspace $workspace1
bindsym Mod4+Shift+2 move container to workspace $workspace2
bindsym Mod4+Shift+3 move container to workspace $workspace3
bindsym Mod4+Shift+4 move container to workspace $workspace4
bindsym Mod4+Shift+5 move container to workspace $workspace5
bindsym Mod4+Shift+6 move container to workspace $workspace6
bindsym Mod4+Shift+7 move container to workspace $workspace7
bindsym Mod4+Shift+8 move container to workspace $workspace8
bindsym Mod4+Shift+9 move container to workspace $workspace9
bindsym Mod4+Shift+0 move container to workspace $workspace0
bindsym Mod4+Shift+XF86AudioPlay move container to workspace $workspacef1
bindsym Mod4+Shift+F1 move container to workspace $workspacef1
bindsym Mod4+Shift+XF86AudioStop move container to workspace $workspacef2
bindsym Mod4+Shift+F2 move container to workspace $workspacef2
bindsym Mod4+Shift+XF86AudioPrev move container to workspace $workspacef3
bindsym Mod4+Shift+F3 move container to workspace $workspacef3
bindsym Mod4+Shift+XF86AudioNext move container to workspace $workspacef4
bindsym Mod4+Shift+F4 move container to workspace $workspacef4
bindsym Mod4+Shift+XF86AudioMute move container to workspace $workspacef5
bindsym Mod4+Shift+F5 move container to workspace $workspacef5
bindsym Mod4+Shift+XF86AudioLowerVolume move container to workspace $workspacef6
bindsym Mod4+Shift+F6 move container to workspace $workspacef6
bindsym Mod4+Shift+XF86AudioRaiseVolume move container to workspace $workspacef7
bindsym Mod4+Shift+F7 move container to workspace $workspacef7
bindsym Mod4+Shift+XF86AudioMicMute move container to workspace $workspacef8
bindsym Mod4+Shift+F8 move container to workspace $workspacef8
bindsym Mod4+Shift+XF86MonBrightnessDown move container to workspace $workspacef9
bindsym Mod4+Shift+F9 move container to workspace $workspacef9
bindsym Mod4+Shift+XF86MonBrightnessUp move container to workspace $workspacef10
bindsym Mod4+Shift+F10 move container to workspace $workspacef10
bindsym Mod4+Shift+F11 move container to workspace $workspacef11
bindsym Mod4+Shift+F12 move container to workspace $workspacef12

assign [app_id="firefox"] $workspace1
assign [app_id="thunderbird"] $workspace2
assign [app_id="nemo"] $workspace3
assign [instance="spotify"] $workspace4
for_window [class="Spotify"] move container to workspace $workspace4
assign [instance="Steam"] $workspace5

bindsym Ctrl+Shift+Mod4+h move workspace to output left
bindsym Ctrl+Shift+Mod4+j move workspace to output down
bindsym Ctrl+Shift+Mod4+k move workspace to output up
bindsym Ctrl+Shift+Mod4+l move workspace to output right

##################################
# layout manipulation
bindsym Mod4+b splith
bindsym Mod4+v splitv

bindsym Mod4+s layout stacking
bindsym Mod4+w layout tabbed
bindsym Mod4+e layout toggle split
bindsym Mod4+a layout toggle split # default is e

bindsym Mod4+q sticky toggle

bindsym Mod4+f fullscreen
bindsym Mod4+Shift+f fullscreen global

bindsym Mod4+Shift+space floating toggle
bindsym Mod4+space focus mode_toggle

bindsym Mod4+o focus parent
bindsym Mod4+i focus child

mode "resize" {
    bindsym h resize shrink horizontal 20 px
    bindsym j resize shrink vertical 20 px
    bindsym k resize grow vertical 20 px
    bindsym l resize grow horizontal 20 px
    bindsym Shift+h resize shrink horizontal 1 px
    bindsym Shift+j resize shrink vertical 1 px
    bindsym Shift+k resize grow vertical 1 px
    bindsym Shift+l resize grow horizontal 1 px

    bindsym q mode "default"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym Mod4+r mode "resize"

mode "gaps" {
    bindsym 0 gaps inner all set 0; mode "default"
    bindsym j gaps inner all minus 10
    bindsym k gaps inner all plus 10
    bindsym Shift+j gaps inner all minus 1
    bindsym Shift+k gaps inner all plus 1

    bindsym q mode "default"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym Mod4+g mode "gaps"

mode "move" {
    bindsym h move left
    bindsym j move down
    bindsym k move up
    bindsym l move right

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym Mod4+m mode "move"

##################################
# execution keys
bindsym Mod4+Return exec alacritty

mode "launch" {
    bindsym f exec firefox; mode "default"
    bindsym t exec thunderbird; mode "default"
    bindsym n exec nemo; mode "default"
    bindsym s exec spotify; mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym Mod4+p mode "launch"

bindsym Mod4+n exec makoctl dismiss
bindsym Mod4+Shift+n exec makoctl dismiss -a

##################################
# fancy keys
bindsym Insert mouse_warping container; focus child; mouse_warping none; seat - cursor press button2;

bindsym Print exec grim -g "$(slurp)"
bindsym Shift+Print exec 'if pgrep wf-recorder; then killall -SIGINT wf-recorder; else wf-recorder -g "$(slurp)"; fi'; exec 'pkill -RTMIN+8 waybar'

bindsym XF86AudioRaiseVolume    exec pactl set-sink-volume @DEFAULT_SINK@ +5%
bindsym XF86AudioLowerVolume    exec pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym XF86AudioMute           exec pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute        exec pactl set-source-mute @DEFAULT_SOURCE@ toggle && pkill -SIGRTMIN+4 waybar

bindsym XF86AudioPlay exec playerctl -p spotify play-pause
bindsym XF86AudioNext exec playerctl -p spotify next
bindsym XF86AudioPrev exec playerctl -p spotify previous
bindsym XF86AudioStop exec playerctl -p spotify stop

bindsym XF86MonBrightnessUp exec light -A 5
bindsym XF86MonBrightnessDown exec light -U 5
bindsym XF86AudioForward exec sudo ddcutil -b 12 setvcp 10 + 5
bindsym XF86AudioRewind exec sudo ddcutil -b 12 setvcp 10 - 5

bindsym XF86Display exec wdisplays
bindsym XF86NotificationCenter input "2:7:SynPS/2_Synaptics_TouchPad" events toggle enabled disabled; exec notify-send "Touchpad" "Touchpad Input has been toggled."

# bindsym XF86Favorites
