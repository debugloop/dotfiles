##################################
# visual
font pango:Fira Mono 11

set $background #1f1f28
set $dark_bg #15161e
set $light_bg #363646
set $foreground #dcd7ba
set $black #090618
set $red #c34043
set $green #76946a
set $yellow #c0a36e
set $blue #7e9cd8
set $magenta #957fb8
set $cyan #6a9589
set $white #c8c093
set $grey #727169

#                       border      bg          text        indicator   child border
client.focused          $blue       $blue       $background $red        $blue
client.focused_inactive $cyan       $cyan       $background $cyan       $cyan
client.unfocused        $background $background $foreground $background $background
client.urgent           $red        $red        $background $background $red

smart_borders on
hide_edge_borders both
default_border pixel 1

# hide mouse after 5s on keyboard
seat * hide_cursor 2000

##################################
# hardware
input type:keyboard {
    xkb_layout us
    xkb_model pc105
    xkb_variant altgr-intl
    xkb_options compose:rctrl,lv3:caps_switch
}

input 2:10:TPPS/2_Elan_TrackPoint {
    accel_profile adaptive
    pointer_accel 0.6
    calibration_matrix 8 0 0 0 5 0
}

input type:touchpad {
    events disabled
    tap enabled
    dwt enabled
    middle_emulation enabled
}

output 'Dell Inc. DELL S3221QS 9VRRTB3' mode 3840x2160@60Hz scale 1.3 position 1080 0
output 'Iiyama North America PLX2483H 1127951501478' mode 1920x1080@60Hz position 0 500 transform 270
output 'Unknown 0x573D 0x00000000' mode 1920x1080@60Hz position 4033 0
output "*" bg $dark_bg solid_color

##################################
# startup execs
exec dbus-sway-environment
exec configure-gtk

exec systemctl --user start kanshi.service
exec mako -c ~/.config/mako/config
exec gammastep -l 48.775846:9.182932
exec kitty -T 'scratch: ipython' fish -c "while true; ipython; end"
exec waybar -b main

exec swayidle -w \
    timeout 10 'if pgrep swaylock; then swaymsg "output * dpms off"; fi' \
    timeout 600 swaylock \
    timeout 610 'swaymsg "output * power off"' \
    resume 'swaymsg "output * power on"' \
    before-sleep swaylock

# clipboard manager
exec clipman clear --all
exec wl-paste -t text --watch clipman store
bindsym Mod4+Ctrl+v exec clipman pick -t wofi

##################################
# window rules
for_window [shell="xwayland"] title_format "ಠ_ಠ :: %title"

for_window [app_id="firefox"] inhibit_idle fullscreen
for_window [app_id="firefox" title="Firefox — Sharing Indicator"] {
    floating enable
    resize set 30px
    border none
    move position 66ppt -25px
}

for_window [app_id="vlc"] inhibit_idle visible

for_window [app_id="gcr-prompter"] border pixel 1

for_window [app_id="thunderbird" title="^.* Reminder$"] {
    floating enable
    sticky enable
}

for_window [title="^scratch:"] {
    move scratchpad
    sticky enable
}

for_window [title="^float:"] {
    floating enable
}

##################################
# scratchpad and launcher
bindsym Mod4+Shift+minus move scratchpad
bindsym Mod4+minus scratchpad show

bindsym XF86HangupPhone [title="scratch: ipython"] scratchpad show
bindsym Pause [title="scratch: ipython"] scratchpad show

bindsym Mod4+Scroll_Lock output "Iiyama North America PLX2483H 1127951501478" toggle
bindsym Mod4+Pause output eDP-1 toggle

bindsym Mod4+d exec wofi -G -t kitty -S run

##################################
# sway control key bindings
bindsym Mod4+Backslash exec swaylock
bindsym Mod4+Shift+c reload
bindsym Mod4+Shift+e exec swaynag -t warning -m 'Exit?' -b 'Yes.' 'swaymsg exit'

bindsym Mod4+period exec killall -SIGUSR1 waybar

mode "escape" {
    bindsym Escape mode "default"
}
bindsym Mod4+Escape mode "escape"

##################################
# container manipulation bindings
floating_modifier Mod4 normal

bindsym --whole-window Mod4+button2 kill
mode "close" {
    bindsym y kill; mode "default"
    bindsym c kill; mode "default"
    bindsym n mode "default"

    bindsym Return kill; mode "default"
    bindsym Escape mode "default"
}
bindsym Mod4+c mode "close"

bindsym Mod4+h focus left
bindsym Mod4+j focus down
bindsym Mod4+k focus up
bindsym Mod4+l focus right
bindsym Mod4+Shift+h move left
bindsym Mod4+Shift+j move down
bindsym Mod4+Shift+k move up
bindsym Mod4+Shift+l move right
bindsym Mod4+comma border toggle

##################################
# workspace manipulation
workspace_auto_back_and_forth yes

bindsym Ctrl+Mod4+j workspace prev_on_output
bindsym Ctrl+Mod4+k workspace next_on_output

set $workspace1 "1:web"
set $workspace2 "2:com"
set $workspace3 "3:file"
set $workspace4 "4:music"
set $workspace5 "5:misc"
set $workspace6 "6:misc"
set $workspace7 "7:term"
set $workspace8 "8:term"
set $workspace9 "9:term"
set $workspace0 "10:term"

bindsym Mod4+1 workspace $workspace1
bindsym Mod4+2 workspace $workspace2
bindsym Mod4+3 workspace $workspace3
bindsym Mod4+4 workspace $workspace4
bindsym Mod4+5 workspace $workspace5
bindsym Mod4+6 workspace $workspace6
bindsym Mod4+7 workspace $workspace7
bindsym Mod4+8 workspace $workspace8
bindsym Mod4+9 workspace $workspace9
bindsym Mod4+0 workspace $workspace0

bindsym Mod4+Shift+1 move container to workspace $workspace1
bindsym Mod4+Shift+2 move container to workspace $workspace2
bindsym Mod4+Shift+3 move container to workspace $workspace3
bindsym Mod4+Shift+4 move container to workspace $workspace4
bindsym Mod4+Shift+5 move container to workspace $workspace5
bindsym Mod4+Shift+6 move container to workspace $workspace6
bindsym Mod4+Shift+7 move container to workspace $workspace7
bindsym Mod4+Shift+8 move container to workspace $workspace8
bindsym Mod4+Shift+9 move container to workspace $workspace9
bindsym Mod4+Shift+0 move container to workspace $workspace0

assign [app_id="firefox"] $workspace1
assign [app_id="thunderbird"] $workspace2
assign [app_id="nemo"] $workspace3

bindsym Ctrl+Shift+Mod4+h move workspace to output left
bindsym Ctrl+Shift+Mod4+j move workspace to output down
bindsym Ctrl+Shift+Mod4+k move workspace to output up
bindsym Ctrl+Shift+Mod4+l move workspace to output right

##################################
# layout manipulation
bindsym Mod4+b splith
bindsym Mod4+v splitv

bindsym Mod4+s layout stacking
bindsym Mod4+w layout tabbed
bindsym Mod4+e layout toggle split
bindsym Mod4+a layout toggle split # default is e

bindsym Mod4+q sticky toggle

bindsym Mod4+f fullscreen
bindsym Mod4+Shift+f fullscreen global

bindsym Mod4+Shift+space floating toggle
bindsym Mod4+space focus mode_toggle

bindsym Mod4+o focus parent
bindsym Mod4+i focus child

mode "resize" {
    bindsym h resize shrink horizontal 20 px
    bindsym j resize shrink vertical 20 px
    bindsym k resize grow vertical 20 px
    bindsym l resize grow horizontal 20 px
    bindsym Shift+h resize shrink horizontal 1 px
    bindsym Shift+j resize shrink vertical 1 px
    bindsym Shift+k resize grow vertical 1 px
    bindsym Shift+l resize grow horizontal 1 px

    bindsym q mode "default"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym Mod4+r mode "resize"

mode "gaps" {
    bindsym 0 gaps inner all set 0; mode "default"
    bindsym j gaps inner all minus 10
    bindsym k gaps inner all plus 10
    bindsym Shift+j gaps inner all minus 1
    bindsym Shift+k gaps inner all plus 1

    bindsym q mode "default"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym Mod4+g mode "gaps"

mode "move" {
    bindsym h move left
    bindsym j move down
    bindsym k move up
    bindsym l move right

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym Mod4+m mode "move"

##################################
# execution keys
bindsym Mod4+Return exec kitty

mode "launch" {
    bindsym f exec firefox; mode "default"
    bindsym t exec thunderbird; mode "default"
    bindsym n exec nemo; mode "default"
    bindsym s exec spotify; mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym Mod4+p mode "launch"

bindsym Mod4+n exec makoctl dismiss
bindsym Mod4+Shift+n exec makoctl dismiss -a

##################################
# fancy keys
bindsym Print exec grim -g "$(slurp)"
bindsym Shift+Print exec 'if pgrep wf-recorder; then killall -SIGINT wf-recorder; else wf-recorder -g "$(slurp)"; fi'; exec 'pkill -RTMIN+8 waybar'

bindsym XF86AudioRaiseVolume    exec pactl set-sink-volume @DEFAULT_SINK@ +1%
bindsym XF86AudioLowerVolume    exec pactl set-sink-volume @DEFAULT_SINK@ -1%
bindsym Shift+XF86AudioRaiseVolume    exec pactl set-sink-volume @DEFAULT_SINK@ +5%
bindsym Shift+XF86AudioLowerVolume    exec pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym XF86AudioMute           exec pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute        exec pactl set-source-mute @DEFAULT_SOURCE@ toggle && pkill -SIGRTMIN+4 waybar

bindsym XF86AudioPlay exec playerctl -p spotify play-pause
bindsym XF86AudioNext exec playerctl -p spotify next
bindsym XF86AudioPrev exec playerctl -p spotify previous
bindsym XF86AudioStop exec playerctl -p spotify stop

bindsym XF86MonBrightnessUp exec light -A 5
bindsym XF86MonBrightnessDown exec light -U 5
bindsym XF86AudioForward exec sudo ddcutil -b 12 setvcp 10 + 5
bindsym XF86AudioRewind exec sudo ddcutil -b 12 setvcp 10 - 5

bindsym XF86Display exec wdisplays
bindsym XF86NotificationCenter input type:touchpad events toggle enabled disabled; exec notify-send "Touchpad" "Touchpad Input has been toggled."

# bindsym XF86Favorites
